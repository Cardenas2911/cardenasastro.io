---

---

<button
    id="theme-toggle"
    type="button"
    class="theme-toggle text-neutral-400 hover:text-gold focus:outline-none focus:ring-2 focus:ring-gold/50 rounded-full text-sm p-2.5 transition-colors"
    aria-label="Alternar modo oscuro/claro"
>
    <svg
        class="sun-and-moon"
        aria-hidden="true"
        width="24"
        height="24"
        viewBox="0 0 24 24"
    >
        <mask class="moon" id="moon-mask">
            <rect x="0" y="0" width="100%" height="100%" fill="white"></rect>
            <circle cx="24" cy="10" r="6" fill="black"></circle>
        </mask>
        <circle
            class="sun"
            cx="12"
            cy="12"
            r="6"
            mask="url(#moon-mask)"
            fill="currentColor"></circle>
        <g class="sun-beams" stroke="currentColor">
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </g>
    </svg>
</button>

<style>
    .theme-toggle {
        --size: 2rem;
        --icon-fill: currentColor;
        --icon-fill-hover: currentColor;
    }

    .sun-and-moon > :is(.moon, .sun, .sun-beams) {
        transform-origin: center center;
    }

    .sun-and-moon > :is(.moon, .sun) {
        fill: var(--icon-fill);
    }

    .theme-toggle:is(:hover, :focus-visible)
        > .sun-and-moon
        > :is(.moon, .sun) {
        fill: var(--icon-fill-hover);
    }

    .sun-and-moon > .sun-beams {
        stroke: var(--icon-fill);
        stroke-width: 2px;
    }

    .theme-toggle:is(:hover, :focus-visible) .sun-and-moon > .sun-beams {
        stroke: var(--icon-fill-hover);
    }

    /* Transition setup */
    .sun-and-moon > :is(.moon, .sun, .sun-beams) {
        transition: all 0.5s cubic-bezier(0.5, 1.5, 0.75, 1); /* Elastic-like */
    }

    .sun-and-moon .sun-beams {
        transition-duration: 0.25s; /* Hide rays faster */
    }

    /* Light Mode (Start) */
    .sun-and-moon .moon circle {
        transform: translateX(10px); /* Start further out */
        opacity: 0;
    }
    .sun-and-moon .sun {
        transform: scale(1);
    }
    .sun-and-moon .sun-beams {
        opacity: 1;
        transform: rotate(0deg);
    }

    /* Dark Mode (End) via global class */
    :global(.dark) .sun-and-moon > .sun {
        transform: scale(1.75); /* Fill the area more */
        transition-timing-function: cubic-bezier(0.25, 0, 0.3, 1);
        transition-duration: 0.5s;
    }

    :global(.dark) .sun-and-moon > .sun-beams {
        opacity: 0;
        transform: rotate(-25deg);
        transition-duration: 0.15s;
    }

    :global(.dark) .sun-and-moon > .moon > circle {
        transform: translateX(-7px);
        opacity: 1;
        transition-duration: 0.5s;
    }

    :global(.dark) .sun-and-moon {
        transform: rotate(-10deg);
        transition: transform 0.5s cubic-bezier(0, 0, 0.2, 1);
    }
</style>

<script>
    const themeToggleBtn = document.getElementById("theme-toggle");

    // Force Dark Mode by default if no preference
    if (
        localStorage.getItem("color-theme") === "dark" ||
        !("color-theme" in localStorage)
    ) {
        document.documentElement.classList.add("dark");
    } else {
        document.documentElement.classList.remove("dark");
    }

    themeToggleBtn?.addEventListener("click", function () {
        if (localStorage.getItem("color-theme")) {
            if (localStorage.getItem("color-theme") === "light") {
                document.documentElement.classList.add("dark");
                localStorage.setItem("color-theme", "dark");
            } else {
                document.documentElement.classList.remove("dark");
                localStorage.setItem("color-theme", "light");
            }
        } else {
            if (document.documentElement.classList.contains("dark")) {
                document.documentElement.classList.remove("dark");
                localStorage.setItem("color-theme", "light");
            } else {
                document.documentElement.classList.add("dark");
                localStorage.setItem("color-theme", "dark");
            }
        }
    });
</script>
